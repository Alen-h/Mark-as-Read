---
description: 
globs: 
alwaysApply: true
---
# Mark as Read Chrome Extension - Development Rules

## ğŸŒ Language Requirements

### Product Language: ENGLISH ONLY
- All user-facing text, UI labels, buttons, messages, and notifications MUST be in English
- HTML elements, popup text, status messages, and user interactions MUST use English
- Error messages and user feedback MUST be in English
- Extension name, descriptions, and user documentation MUST be in English

### Code Comments: CHINESE ONLY
- All code comments MUST be written in Chinese (ä¸­æ–‡)
- Function descriptions, variable explanations, and inline comments MUST use Chinese
- Code documentation and technical notes MUST be in Chinese
- TODO comments and development notes MUST be in Chinese

## ğŸ—ï¸ Project Architecture

### File Structure Standards
```
Mark as Read/
â”œâ”€â”€ manifest.json          # æ‰©å±•é…ç½®æ¸…å•
â”œâ”€â”€ popup.html/css/js      # å¼¹å‡ºçª—å£ç•Œé¢ç»„ä»¶
â”œâ”€â”€ background.js          # åå°æœåŠ¡å·¥ä½œè„šæœ¬
â”œâ”€â”€ content.js             # å†…å®¹è„šæœ¬æ³¨å…¥
â”œâ”€â”€ history.html/css/js    # å†å²è®°å½•é¡µé¢ç»„ä»¶
â”œâ”€â”€ styles.css             # å…¨å±€æ ·å¼æ–‡ä»¶
â””â”€â”€ icons/                 # å›¾æ ‡èµ„æºæ–‡ä»¶å¤¹
```

### Chrome Extension Best Practices
- Use Manifest V3 standards and APIs
- Implement proper permission requests and security practices
- Follow Chrome Web Store policy guidelines
- Ensure cross-browser compatibility where applicable

## ğŸ’» Development Guidelines

### JavaScript Development
```javascript
// âœ… CORRECT: English UI text with Chinese comments
function markPageAsRead(url, title) {
    // æ ‡è®°é¡µé¢ä¸ºå·²è¯»çŠ¶æ€ï¼Œä¿å­˜åˆ°chromeå­˜å‚¨
    const pageData = {
        title: title,
        timestamp: Date.now(),
        domain: new URL(url).hostname
    };
    
    // æ˜¾ç¤ºè‹±æ–‡æˆåŠŸæ¶ˆæ¯ç»™ç”¨æˆ·
    showNotification("Page marked as read successfully!");
}

// âŒ INCORRECT: Chinese UI text
function markPageAsRead(url, title) {
    showNotification("é¡µé¢å·²æ ‡è®°ä¸ºå·²è¯»ï¼"); // Wrong language for UI
}
```

### HTML/UI Components
```html
<!-- âœ… CORRECT: English UI labels -->
<button id="actionButton" class="popup-button primary">
    Mark as Read
</button>
<div class="popup-stats">
    <div>Total Read: <span id="totalRead">0</span> pages</div>
</div>

<!-- âŒ INCORRECT: Chinese UI labels -->
<button id="actionButton" class="popup-button primary">
    æ ‡è®°ä¸ºå·²è¯»  <!-- Wrong language for UI -->
</button>
```

### CSS Styling
```css
/* æ­£ç¡®ç¤ºä¾‹ï¼šè‹±æ–‡UIé…åˆä¸­æ–‡æ³¨é‡Š */
.popup-button {
    /* ä¸»è¦æ“ä½œæŒ‰é’®çš„æ ·å¼è®¾è®¡ */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    /* ç¡®ä¿æ–‡å­—åœ¨æ¸å˜èƒŒæ™¯ä¸Šæ¸…æ™°å¯è§ */
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.status-success::after {
    /* æˆåŠŸçŠ¶æ€çš„æç¤ºå†…å®¹ï¼Œæ˜¾ç¤ºè‹±æ–‡ç»™ç”¨æˆ· */
    content: "Successfully marked as read";
}
```

## ğŸ¯ Functional Requirements

### Core Features Implementation
- **Page Marking**: Implement one-click page marking with English confirmation messages
- **Visual Indicators**: Show "READ" badges on marked pages (English text)
- **Statistics**: Display read count with English labels ("Total Read: X pages")
- **History Management**: History page with English headings and navigation
- **Sync Storage**: Use Chrome sync storage with proper error handling

### User Experience Standards
- All buttons, menus, and interactive elements use English text
- Error messages and tooltips display in English
- Status indicators and feedback messages in English
- Keyboard shortcuts and accessibility labels in English

## ğŸ“ Code Quality Standards

### Comment Requirements
```javascript
// å‡½æ•°ç”¨äºè·å–å½“å‰æ ‡ç­¾é¡µçš„URLå’Œæ ‡é¢˜
async function getCurrentTabInfo() {
    try {
        // æŸ¥è¯¢å½“å‰æ´»è·ƒçš„æ ‡ç­¾é¡µ
        const [tab] = await chrome.tabs.query({active: true, currentWindow: true});
        
        // è¿”å›é¡µé¢åŸºæœ¬ä¿¡æ¯ç”¨äºæ ‡è®°å¤„ç†
        return {
            url: tab.url,
            title: tab.title,
            id: tab.id
        };
    } catch (error) {
        // é”™è¯¯å¤„ç†ï¼šè®°å½•è·å–æ ‡ç­¾é¡µä¿¡æ¯å¤±è´¥
        console.error('è·å–æ ‡ç­¾é¡µä¿¡æ¯å¤±è´¥:', error);
        throw error;
    }
}
```

### Variable Naming
- Use English for variable names, function names, and identifiers
- Use descriptive English names: `markAsReadButton`, `totalReadCount`, `pageHistory`
- Avoid Chinese characters in code identifiers

### Error Handling
```javascript
// é”™è¯¯å¤„ç†ç¤ºä¾‹ï¼šä¸­æ–‡æ³¨é‡Šï¼Œè‹±æ–‡ç”¨æˆ·æ¶ˆæ¯
try {
    // å°è¯•ä¿å­˜é¡µé¢æ ‡è®°æ•°æ®
    await savePageMark(pageData);
    showSuccessMessage("Page marked as read!"); // è‹±æ–‡ç”¨æˆ·æ¶ˆæ¯
} catch (error) {
    // å¤„ç†ä¿å­˜å¤±è´¥çš„æƒ…å†µ
    console.error('ä¿å­˜é¡µé¢æ ‡è®°å¤±è´¥:', error); // ä¸­æ–‡æ—¥å¿—æ³¨é‡Š
    showErrorMessage("Failed to mark page. Please try again."); // è‹±æ–‡é”™è¯¯æ¶ˆæ¯
}
```

## ğŸ”§ Development Workflow

### Testing Requirements
- Test all English UI text for proper grammar and clarity
- Verify Chinese comments are accurate and helpful
- Test extension functionality across different websites
- Validate manifest.json configuration

### Code Review Checklist
- [ ] All user-facing text is in English
- [ ] All code comments are in Chinese
- [ ] Chrome extension APIs used correctly
- [ ] Proper error handling with English user messages
- [ ] Responsive design works across different screen sizes
- [ ] Data storage and sync functionality working properly

## ğŸš€ Deployment Guidelines

### Pre-deployment Checks
- Validate all English text for grammar and spelling
- Ensure Chinese comments are comprehensive and accurate
- Test extension installation and uninstallation process
- Verify icon assets and manifest configuration
- Check Chrome Web Store compliance

Remember: The user sees English, the developer reads Chinese comments! 